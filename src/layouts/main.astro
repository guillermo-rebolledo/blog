---
import '@fontsource-variable/jetbrains-mono';
import '@fontsource-variable/geist';
import '../styles/global.css';
import ThemeToggle from '../components/ThemeToggle.astro';
const { content } = Astro.props;
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <meta name="theme-color" content="#000000" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>{content.title}</title>
    <meta
      name="description"
      content={content.description ??
        'Frontend-focused Software Engineer with 7+ years of experience building accessible, high-performance, and user-centered web applications.'}
    />
    <!-- Inline script to prevent FOUC - runs before page renders -->
    <script is:inline>
      (function () {
        const THEME_KEY = 'theme-preference';
        const stored = localStorage.getItem(THEME_KEY);
        const theme = stored && ['light', 'dark', 'auto'].includes(stored) ? stored : 'auto';

        let effective;
        if (theme === 'auto') {
          effective = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        } else {
          effective = theme;
        }

        if (effective === 'dark') {
          document.documentElement.classList.add('dark');
        }

        // Update theme-color meta tag
        const metaTheme = document.querySelector('meta[name="theme-color"]');
        if (metaTheme) {
          metaTheme.setAttribute('content', effective === 'dark' ? '#000000' : '#ffffff');
        }
      })();
    </script>
  </head>
  <body class="m-0 min-h-screen overflow-x-hidden overscroll-none p-0 pb-16">
    <ThemeToggle />
    <slot />
    <footer
      class="bg-background/80 border-border fixed right-0 bottom-0 left-0 flex h-14 items-center justify-center border-t backdrop-blur-sm"
    >
      <p class="font-jetbrains text-sm text-black dark:text-white">
        Made with <span role="img" aria-label="Coffee">☕️</span> by <a
          href="http://linkedin.com/in/gortizdev"
          target="_blank"
          class="underline">Guillermo Rebolledo</a
        > / {new Date().getFullYear()}
      </p>
    </footer>
  </body>
</html>
